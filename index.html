<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة الجيم</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .hidden {
            display: none;
        }

        /* تأثيرات عند الانتقال بين الأقسام */
        section {
            transition: opacity 0.5s ease;
        }

        .fade-in {
            opacity: 1;
        }

        .fade-out {
            opacity: 0;
        }

        .active {
            display: block;
        }

        td button {
            margin: 5px;
            padding: 5px 10px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
        }

        td button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h2>إدارة الجيم</h2>
            <ul>
                <li><a href="#members" onclick="showSection('members')">إدارة الأعضاء</a></li>
                <li><a href="#trainers" onclick="showSection('trainers')">إدارة المدربين</a></li>
                <li><a href="#subscriptions" onclick="showSection('subscriptions')">إدارة الاشتراكات</a></li>
                <li><a href="#inventory" onclick="showSection('inventory')">إدارة المخزون</a></li>
                <li><a href="#damaged-inventory" onclick="showSection('damaged-inventory')">المخزون التالف</a></li>
                <li><a href="#meals" onclick="showSection('meals')">إدارة الوجبات الغذائية</a></li>
                <li><a href="#ratings" onclick="showSection('ratings')">التقييمات والملاحظات</a></li>
                <li><a href="#rewards" onclick="showSection('rewards')">المكافآت والحوافز</a></li>
                <li><a href="#special-requests" onclick="showSection('special-requests')">الطلبات الخاصة</a></li>
                <li><a href="#marketing" onclick="showSection('marketing')">حملات التسويق</a></li>
                <li><a href="#advanced-scheduling" onclick="showSection('advanced-scheduling')">الجدولة المتقدمة</a></li>
                <li><a href="#complaints" onclick="showSection('complaints')">الشكاوي</a></li>
                <li><a href="#renewal" onclick="showSection('renewal')">تجديد الأعضاء</a></li>
            </ul>
        </aside>

        <main class="content">
            <!-- إدارة الأعضاء -->
            <section id="members" class="hidden">
                <h3>إدارة الأعضاء</h3>
                <form id="memberForm">
                    <input type="text" name="fullName" placeholder="اسم العضو بالكامل" required>
                    <input type="number" name="age" placeholder="العمر" required>
                    <input type="tel" name="phone" placeholder="رقم الهاتف" required>
                    <input type="text" name="address" placeholder="العنوان" required>
                    <button type="submit">إضافة عضو</button>
                </form>
                <table id="memberTable">
                    <thead>
                        <tr>
                            <th>الاسم</th>
                            <th>العمر</th>
                            <th>رقم الهاتف</th>
                            <th>العنوان</th>
                            <th>تعديل</th>
                            <th>حذف</th>
                        </tr>
                    </thead>
                    <tbody id="memberTableBody"></tbody>
                </table>
            </section>

            <!-- إدارة المدربين -->
            <section id="trainers" class="hidden">
                <h3>إدارة المدربين</h3>
                <form id="trainerForm">
                    <input type="text" name="trainerName" placeholder="اسم المدرب" required>
                    <input type="text" name="specialization" placeholder="التخصص" required>
                    <input type="tel" name="trainerPhone" placeholder="رقم الهاتف" required>
                    <button type="submit">إضافة مدرب</button>
                </form>
                <table id="trainerTable">
                    <thead>
                        <tr>
                            <th>اسم المدرب</th>
                            <th>التخصص</th>
                            <th>رقم الهاتف</th>
                            <th>تعديل</th>
                            <th>حذف</th>
                        </tr>
                    </thead>
                    <tbody id="trainerTableBody"></tbody>
                </table>
            </section>

            <!-- إدارة الاشتراكات -->
            <section id="subscriptions" class="hidden">
                <h3>إدارة الاشتراكات</h3>
                <form id="subscriptionForm">
                    <input type="text" name="subscriberName" placeholder="اسم المشترك" required>
                    <input type="date" name="startDate" required>
                    <input type="date" name="endDate" required>
                    <button type="submit">إضافة اشتراك</button>
                </form>
                <table id="subscriptionTable">
                    <thead>
                        <tr>
                            <th>اسم المشترك</th>
                            <th>تاريخ البداية</th>
                            <th>تاريخ النهاية</th>
                            <th>تعديل</th>
                            <th>حذف</th>
                        </tr>
                    </thead>
                    <tbody id="subscriptionTableBody"></tbody>
                </table>
            </section>

            <!-- إدارة المخزون -->
            <section id="inventory" class="hidden">
                <h3>إدارة المخزون</h3>
                <form id="inventoryForm">
                    <input type="text" name="itemName" placeholder="اسم العنصر" required>
                    <input type="number" name="quantity" placeholder="الكمية" required>
                    <input type="text" name="category" placeholder="الفئة" required>
                    <button type="submit">إضافة عنصر</button>
                </form>
                <table id="inventoryTable">
                    <thead>
                        <tr>
                            <th>اسم العنصر</th>
                            <th>الكمية</th>
                            <th>الفئة</th>
                            <th>تعديل</th>
                            <th>حذف</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTableBody"></tbody>
                </table>
            </section>

            <!-- المخزون التالف -->
            <section id="damaged-inventory" class="hidden">
                <h3>إدارة المخزون التالف</h3>
                <form id="damagedInventoryForm">
                    <input type="text" name="damagedItemName" placeholder="اسم العنصر التالف" required>
                    <input type="number" name="damagedQuantity" placeholder="الكمية التالفة" required>
                    <textarea name="reason" placeholder="سبب التلف" required></textarea>
                    <button type="submit">إضافة عنصر تالف</button>
                </form>
                <table id="damagedInventoryTable">
                    <thead>
                        <tr>
                            <th>اسم العنصر</th>
                            <th>الكمية</th>
                            <th>سبب التلف</th>
                            <th>تعديل</th>
                            <th>حذف</th>
                        </tr>
                    </thead>
                    <tbody id="damagedInventoryTableBody"></tbody>
                </table>
            </section>

            <!-- إدارة الوجبات الغذائية -->
            <section id="meals" class="hidden">
                <h3>إدارة الوجبات الغذائية</h3>
                <form id="mealsForm">
                    <input type="text" name="mealName" placeholder="اسم الوجبة" required>
                    <input type="text" name="calories" placeholder="السعرات الحرارية" required>
                    <textarea name="ingredients" placeholder="المكونات" required></textarea>
                    <button type="submit">إضافة وجبة</button>
                </form>
                <table id="mealsTable">
                    <thead>
                        <tr>
                            <th>اسم الوجبة</th>
                            <th>السعرات الحرارية</th>
                            <th>المكونات</th>
                            <th>تعديل</th>
                            <th>حذف</th>
                        </tr>
                    </thead>
                    <tbody id="mealsTableBody"></tbody>
                </table>
            </section>

            <!-- تجديد الأعضاء -->
            <section id="renewal" class="hidden">
                <h3>تجديد الأعضاء</h3>
                <table id="renewalTable">
                    <thead>
                        <tr>
                            <th>اسم العضو</th>
                            <th>تاريخ نهاية الاشتراك</th>
                            <th>حالة التجديد</th>
                            <th>تجديد الاشتراك</th>
                        </tr>
                    </thead>
                    <tbody id="renewalTableBody"></tbody>
                </table>
            </section>

            <!-- باقي الأقسام بنفس النمط -->
        </main>
    </div>

    <script>
        // Function to show a specific section
        function showSection(sectionId) {
            const sections = document.querySelectorAll('section');
            sections.forEach(section => section.classList.add('hidden'));
            const section = document.getElementById(sectionId);
            section.classList.remove('hidden');
            section.classList.add('fade-in');
        }

        // Add data to the table on form submission
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const tableBody = document.getElementById(`${this.id.replace('Form', 'Table')}Body`);
                const row = document.createElement('tr');

                formData.forEach((value, key) => {
                    const cell = document.createElement('td');
                    cell.textContent = value;
                    row.appendChild(cell);
                });

                const editCell = document.createElement('td');
                const deleteCell = document.createElement('td');
                editCell.textContent = 'تعديل';
                deleteCell.textContent = 'حذف';
                row.appendChild(editCell);
                row.appendChild(deleteCell);

                tableBody.appendChild(row);
                this.reset();

                // For members, also add them to the renewal list if their subscription is close to expiry
                if (form.id === 'subscriptionForm') {
                    addRenewalMember(formData);
                }

                // Save data to localStorage
                saveData();
            });
        });

        // Add members who need renewal based on subscription dates
        function addRenewalMember(formData) {
            const renewalTableBody = document.getElementById('renewalTableBody');
            const row = document.createElement('tr');
            const nameCell = document.createElement('td');
            const endDateCell = document.createElement('td');
            const statusCell = document.createElement('td');
            const renewCell = document.createElement('td');

            nameCell.textContent = formData.get('subscriberName');
            endDateCell.textContent = formData.get('endDate');
            statusCell.textContent = 'مطلوب تجديد';
            renewCell.textContent = 'تجديد';

            row.appendChild(nameCell);
            row.appendChild(endDateCell);
            row.appendChild(statusCell);
            row.appendChild(renewCell);

            renewalTableBody.appendChild(row);
        }

        // Save data in localStorage for all sections
        function saveData() {
            const sections = ['memberTable', 'trainerTable', 'subscriptionTable', 'inventoryTable', 'damagedInventoryTable', 'mealsTable', 'ratingsTable', 'rewardsTable', 'specialRequestsTable', 'marketingTable', 'advancedSchedulingTable', 'complaintsTable', 'renewalTable'];

            sections.forEach(sectionId => {
                const rows = [];
                const tableBody = document.getElementById(`${sectionId}Body`);
                tableBody.querySelectorAll('tr').forEach(row => {
                    const rowData = [];
                    row.querySelectorAll('td').forEach(cell => {
                        rowData.push(cell.textContent);
                    });
                    rows.push(rowData);
                });

                localStorage.setItem(sectionId, JSON.stringify(rows));
            });
        }

        // Load data from localStorage on page load
        window.onload = function() {
            const sections = ['memberTable', 'trainerTable', 'subscriptionTable', 'inventoryTable', 'damagedInventoryTable', 'mealsTable', 'ratingsTable', 'rewardsTable', 'specialRequestsTable', 'marketingTable', 'advancedSchedulingTable', 'complaintsTable', 'renewalTable'];

            sections.forEach(sectionId => {
                const savedData = JSON.parse(localStorage.getItem(sectionId));
                if (savedData) {
                    const tableBody = document.getElementById(`${sectionId}Body`);
                    savedData.forEach(data => {
                        const row = document.createElement('tr');
                        data.forEach(cellData => {
                            const cell = document.createElement('td');
                            cell.textContent = cellData;
                            row.appendChild(cell);
                        });
                        tableBody.appendChild(row);
                    });
                }
            });
        };
    </script>
</body>
</html>
